# Упражнение 5 - React Router

Проблема маршрутизации начинает появляеться в практически любом React приложении
как только у вас появляються несколько различных экранов между которыми может
переключаться пользователь. На первый взгляд переключение работает, но за годы
использования браузеров у пользователей выработались определенные ожидания. Что
пользователь может вернуться на предыдущую страницу с использование кнопки
"назад" в браузере или что пользователь может сохранить текущую страницу и
открыть ее в другом браузере например на своем мобильном устройстве. Для решения
этих проблем и упрощения работы с переходами между разными URL в приложении и
была создана библиотека React Router. В ее текущей(6ой) версии эта библиотека
делает намного больше чем просто помогает решить изложенные проблемы и мы
коснемся некоторых из ее возможностей подробнее в этом задании.

## Задание

Заменить наш собственный роутинг на react-router и проверить что все работает
как раньше. Для начала нам нужно установить библиотеку

```
npm install react-router-dom@6
```

Далее нам прийдеться достаточно много поменять в нашем приложении, чтобы
подключить роутинг. Сначала мы выделим нашу корзину в отдельный компонент так
как переключение на нее будет осуществляеть React router, а не наше приложение.

```jsx
// в файле App.js
export function BasketPlace() {
  const isLoaded = useSelector((state) => state.isLoaded);
  const error = useSelector((state) => state.error);
  const dispatch = useDispatch();
  useEffect(() => {
    dispatch(fetchItemsThunk());
  }, [dispatch]);
  let basketPlace = null;

  if (error) {
    basketPlace = <div>Ошибка: {error.message}</div>;
  } else if (!isLoaded) {
    basketPlace = <div>Загрузка...</div>;
  } else {
    basketPlace = <Basket />;
  }
  return basketPlace;
}
function App() {
  // Весь код до этой строчки перемещен в BasketPlace
  const [currrentPath, setCurrrentPath] = useState("/");
}
```

Выделить этот компонент в отдельный файл.

Вторый шаг это убрать наш ручной роутинг из нашего приложения. Для этого мы
можем удалить switch и состояние котороые относятся к роутингу.

```jsx
// в файле App.js
function App() {
  // весь код до этого можно удалить
  return <div className="App">...</div>;
}
```

Попробуйте открыть приложение в браузере. Теперь мы будем исправлять ошибки:

1. `'clickTopMenuHandler' is not defined` React router будет обрабатывать наши
   переходы по ссылкам с помощью специального компонента `<Link/>` который
   работает примерно по тому же принципу, что и наш компонент `<a/>`. Поэтому мы
   можем просто поменять наши ссылки на `<Link/>` и приложение станет работать
   как надо.

   Меняем:

```jsx
<a href="#" onClick={clickTopMenuHandler} data-route={"/"}>
  Главная
</a>
```

на

```jsx
import { Link } from "react-router-dom";
//...
<Link to={"/"}>Главная</Link>;
```

2. `'title' is not defined` - пока мы заменим title на фиксированный и вернемся
   к нему в доп. задании. Определите `const title = "React router"`

3. `'content is not defined` - вместо content в React Router используется
   специальный компонент `<Outlet>` - этот компонент позволяет определить
   `Layout` - место в котором нужно отображать изменяемый контент потомков.
   Можно смотреть на это как заглушки - Outlet ставиться как заглушка на которое
   впоследствии взависимости от выбранного пользователям пути отрисуется нужный
   реальный компонент.

```jsx
import { Outlet } from "react-router";
///...
<h1>{title}</h1>
<Outlet />
```

Теперь приложение должно успешно запуститься в браузере. Переходы все еще не
будут работать для этого нам нужно определить маршруты переходов. Для этого в
React Router используется специальный набор компонентов:

- `Browser-Router` - роутер отвечающий за переходы по ссылкам в браузере.
- `Routes` - общий родитель для всех маршрутов.
- `Route` - определяет один маршрут.

Маршруты определяются следующим образом:

````jsx

React router будет выступать в качестве главной точки в наше приложение поэтому
в index.js нам нужно заменить `root.render` на следующий код:

```jsx
import { BrowserRouter, Routes, Route } from "react-router-dom";
//...
root.render(
  <BrowserRouter>
    <Routes>
      <Route path="/" element={<div>Тут может быть перечень товаров</div>}>
        <Route index element={<Home />} />
        <Route path="teams" element={<Teams />}>
          <Route path=":teamId" element={<Team />} />
          <Route path="new" element={<NewTeamForm />} />
          <Route index element={<LeagueStandings />} />
        </Route>
      </Route>
    </Routes>
  </BrowserRouter>,
);
````

## Доп. задания

## Файлы

- src/App.js
- src/components/Counter.js
- src/components/Basket.js
- src/index.js
