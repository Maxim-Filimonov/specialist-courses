# Упражнение 6 - React Transition Group

Есть разные средства для поддержка анимации в React.js в данном курсе мы
рассмотрим библиотеку от сообщества React -
[React Transition Group](https://reactcommunity.org/react-transition-group).

## Задание

Мы продолжим дорабатывать наше приложение - корзина. В этот раз мы добавим
анимацию при применении промокода. В данный момент у вас просто вываливается
alert при применениии промокода, мы можем сделать лучше! Для этого
самостоятельно создайте новое действие `ApplyPromoCode` которое будет бросаться
компонентом BasketPromoCode. Это действие будет показывать сообщение
пользователя на 5 секунд о том, что промокод был применен и исчезнет через 5
секунд. Для этого мы создадим новый компонент и будем показывать его только
когда промокод был применен.

Сначала сделайте эту задачу без анимации - показывать новый компонент при
применении промокода.

Теперь добавим анимацию с помощью компонента Transition:

```jsx
// в новом компоненте
import { Transition } from "react-transition-group";

// Длина анимации
const duration = 300;

// Общий стиль который мы будем менять взависимости от состояния анимации
const defaultStyle = {
  transition: `opacity ${duration}ms ease-in-out`,
  opacity: 0,
};

// Изменение стиля в зависимости от состояния анимации
const transitionStyles = {
  entering: { opacity: 1 },
  entered: { opacity: 1 },
  exiting: { opacity: 0 },
  exited: { opacity: 0 },
};
```

И применим этот переход к нашему компонент, с помощью элемента transition

```jsx
return (
  <Transition>
    {(state) => (
      <h1 style={{ ...defaultStyle, ...transitionStyles[state] }}>
        Промокод был применен
      </h1>
    )}
  </Transition>
);
```

Попробуйте в браузере.. Замечаете, что ничего не поменялось? Это особенность
работы с анимацией в React. Чаще всего мы должны начинать анимировать компонент
из состояния когда его еще не видно. Для этого в transition есть свойство `in`
который задает видимость объекта анимации. Когда свойство переходит в true у на
происходит отрисовка объекта `entering -> entered`, а когда свойство переходи в
`false` то отрисовка объекта `exiting -> exited`.

Значит нам нужно как то переключить это состояние через какое-то время чтобы
сообщение исчезло - для этого мы можем воспользоваться знакомым `useState` для
хранения состояния видимости объекта и его изменения. А изменять мы будем с
помощью `useEffect`.

```jsx
// Контролирует отображение объекта
const [inProp, setInProp] = useState(false);
useEffect(() => {
  // покажем сообщение через 500ms после загрузки этого компонента.
  setTimeout(() => setInProp(true), 500);
  // и спрячем его через 5 секунд.
  setTimeout(() => setInProp(false), 5000);
}, []);
```

и передадим свойство в компонент переходаЖ

```jsx
<Transition in={inProp}>
```

Попробуйте применить промокод теперь в браузере. Сообщение должно медленно
появляеться на экране и потом исчезать. Если внимательно посмотритете при
исчезании остается пустое место на экране. Это можно исправить с помощью
свойства `Transition` `unmountOnExit={true}` которое убирает объект из DOM при
окончании анимации.

## Файлы

- src/App.js
- src/reducer.js
- src/components/BasketPromo.js
- src/components/BasketPromoCodeMessage.js - вы могли назвать его по другому
